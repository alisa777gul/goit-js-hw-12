{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.list-img a');\n\nexport async function renderUsers(photos, photoList) {\n    const markup = photos\n        .map((photo) => {\n            return `<li class=\"imgAdded\">\n                <a href=\"${photo.largeImageURL}\"> \n                    <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" width=\"360\" height=\"152\">\n                </a>\n                <div class=\"descr\">\n                    <p><b>Likes</b> ${photo.likes}</p>\n                    <p><b>Views</b> ${photo.views}</p>\n                    <p><b>Comments</b> ${photo.comments}</p>\n                    <p><b>Downloads</b> ${photo.downloads}</p>\n                </div>\n            </li>`;\n        })\n        .join(\"\");\n\n    photoList.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}","import axios from 'axios';\n\nexport async function fetchPhotos(query, page, per_page) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: \"45999766-9f9a6b82db6e56573d0cf5f49\",\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: per_page,\n                page: page\n            }\n        });\n        const { hits, totalHits } = response.data;\n\n        if (hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        }\n\n        return { hits, totalHits }; \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching the images. Please try again later.',\n            position: 'topRight'\n        });\n        console.error(error);\n        return { hits: [], totalHits: 0 }; \n    }\n}","import iziToast from \"izitoast\";\nimport axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formNew = document.querySelector(\".formImg\");\nconst photoList = document.querySelector(\".list-img\");\nconst loading = document.querySelector(\".loader\");\nconst fetchPhotosBtn = document.querySelector(\".fetchPhotos\");\n\nconst inputSearch = document.getElementById(\"search-img\");\nimport { renderUsers } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nlet page = 1;\nlet per_page = 15;\nlet query = '';\nlet totalHits = 0;\n\nformNew.addEventListener(\"submit\", async (event) => { \n    event.preventDefault(); \n    photoList.innerHTML = \"\";\n    loading.classList.remove(\"visually-hidden\");\n    fetchPhotosBtn.classList.add(\"visually-hidden\"); \n    page = 1; \n    query = inputSearch.value.trim(); \n\n    if (query !== \"\") { \n        try {\n            const { hits, totalHits: total } = await fetchPhotos(query, page, per_page); \n            totalHits = total; \n            renderUsers(hits, photoList);\n\n            if (hits.length >= per_page && page * per_page < totalHits) {\n                fetchPhotosBtn.classList.remove(\"visually-hidden\");\n            } else {\n                fetchPhotosBtn.classList.add(\"visually-hidden\");\n                if (hits.length === 0) {\n                    iziToast.info({\n                        title: 'End of Results',\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        position: 'topRight',\n                        timeout: 5000\n                    });\n                }\n            }\n            loading.classList.add(\"visually-hidden\");\n        } catch (error) {\n            console.log(error);\n            fetchPhotosBtn.classList.add(\"visually-hidden\");\n            loading.classList.add(\"visually-hidden\");\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        }\n    } else {\n        loading.classList.add(\"visually-hidden\");\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight'\n        });\n    }\n});\n\nfetchPhotosBtn.addEventListener(\"click\", async () => {\n    try {\n        fetchPhotosBtn.classList.add(\"visually-hidden\");\n        loading.classList.remove(\"visually-hidden\");\n        page += 1; \n        const { hits, totalHits: total } = await fetchPhotos(query, page, per_page); \n        totalHits = total; \n        renderUsers(hits, photoList);\n\n       setTimeout(() => {\n            const listItems = document.querySelectorAll(\".list-img\"); \n            if (listItems.length > 0) {\n                const itemHeight = listItems[0].getBoundingClientRect().height;\n                window.scrollBy({\n                    top: itemHeight * 2,\n                    behavior: 'smooth'\n                });\n            }\n        }, 100);\n\n        if (hits.length >= per_page && page * per_page < totalHits) {\n            fetchPhotosBtn.classList.remove(\"visually-hidden\");\n        } else {\n            fetchPhotosBtn.classList.add(\"visually-hidden\");\n            if (page * per_page >= totalHits) {\n                iziToast.info({\n                    title: 'End of Results',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    timeout: 5000\n                });\n            }\n        }\n        loading.classList.add(\"visually-hidden\");\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight'\n        });\n        fetchPhotosBtn.classList.add(\"visually-hidden\");\n        loading.classList.add(\"visually-hidden\");\n    }\n});"],"names":["lightbox","SimpleLightbox","renderUsers","photos","photoList","markup","photo","fetchPhotos","query","page","per_page","response","axios","hits","totalHits","error","formNew","loading","fetchPhotosBtn","inputSearch","event","total","iziToast","listItems","itemHeight"],"mappings":"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"}