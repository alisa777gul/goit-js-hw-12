{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.list-img a');\n\nexport async function renderUsers(photos, photoList) {\n    const markup = photos\n        .map((photo) => {\n            return `<li class=\"imgAdded\">\n                <a href=\"${photo.largeImageURL}\"> \n                    <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" width=\"360\" height=\"152\">\n                </a>\n                <div class=\"descr\">\n                    <p><b>Likes</b> ${photo.likes}</p>\n                    <p><b>Views</b> ${photo.views}</p>\n                    <p><b>Comments</b> ${photo.comments}</p>\n                    <p><b>Downloads</b> ${photo.downloads}</p>\n                </div>\n            </li>`;\n        })\n        .join(\"\");\n\n    photoList.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh(); // Обновляем lightbox, чтобы он учитывал новые элементы\n}","import iziToast from \"izitoast\";\nimport axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function fetchPhotos(query, page, per_page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: \"45999766-9f9a6b82db6e56573d0cf5f49\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: per_page,\n        page: page,\n      }\n    });\n    const data = response.data;\n    if (data.hits.length <= 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return [];\n    }\n    return data.hits;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching the images. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n}","import iziToast from \"izitoast\";\nimport axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formNew = document.querySelector(\".formImg\");\nconst photoList = document.querySelector(\".list-img\");\nconst loading = document.querySelector(\".loader\");\nconst fetchPhotosBtn = document.querySelector(\".fetchPhotos\");\n\nconst inputSearch = document.getElementById(\"search-img\");\nimport { renderUsers } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nlet page = 1;\nlet per_page = 15;\nlet query = '';\n\n\nformNew.addEventListener(\"submit\", async (event) => { \n    event.preventDefault(); \n    photoList.innerHTML = \"\";\n    loading.classList.remove(\"visually-hidden\");\n    fetchPhotosBtn.classList.add(\"visually-hidden\"); \n    page = 1; \n    query = inputSearch.value.trim(); \n\n    if (query !== \"\") { \n        try {\n            const photos = await fetchPhotos(query, page, per_page); \n            renderUsers(photos, photoList);\n\n            \n            if (photos.length >= per_page) {\n                fetchPhotosBtn.classList.remove(\"visually-hidden\");\n            } else {\n                fetchPhotosBtn.classList.add(\"visually-hidden\");\n            }\n            loading.classList.add(\"visually-hidden\");\n        } catch (error) {\n            console.log(error);\n            fetchPhotosBtn.classList.add(\"visually-hidden\");\n            loading.classList.add(\"visually-hidden\");\n        }\n    } else {\n        loading.classList.add(\"visually-hidden\");\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a valid search query!',\n            position: 'topRight'\n        });\n    }\n});\n\n\nfetchPhotosBtn.addEventListener(\"click\", async () => {\n    try {\n        fetchPhotosBtn.classList.add(\"visually-hidden\");\n        loading.classList.remove(\"visually-hidden\");\n        page += 1; \n        const photos = await fetchPhotos(query, page, per_page); \n        renderUsers(photos, photoList);\n\n    \n        if (photos.length >= per_page) {\n            fetchPhotosBtn.classList.remove(\"visually-hidden\");\n        } else {\n            fetchPhotosBtn.classList.add(\"visually-hidden\");\n        }\n        loading.classList.add(\"visually-hidden\");\n    } catch (error) {\n        console.log(error);\n        fetchPhotosBtn.classList.add(\"visually-hidden\");\n        loading.classList.add(\"visually-hidden\");\n    }\n});"],"names":["lightbox","SimpleLightbox","renderUsers","photos","photoList","markup","photo","fetchPhotos","query","page","per_page","data","axios","iziToast","error","formNew","loading","fetchPhotosBtn","inputSearch","event"],"mappings":"owBAGA,MAAMA,EAAW,IAAIC,EAAe,aAAa,EAE1C,eAAeC,EAAYC,EAAQC,EAAW,CACjD,MAAMC,EAASF,EACV,IAAKG,GACK;AAAA,2BACQA,EAAM,aAAa;AAAA,gCACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,sCAGhCA,EAAM,KAAK;AAAA,sCACXA,EAAM,KAAK;AAAA,yCACRA,EAAM,QAAQ;AAAA,0CACbA,EAAM,SAAS;AAAA;AAAA,kBAGhD,EACA,KAAK,EAAE,EAEZF,EAAU,mBAAmB,YAAaC,CAAM,EAEhDL,EAAS,QAAO,CACpB,CCrBO,eAAeO,EAAYC,EAAOC,EAAMC,EAAU,CACvD,GAAI,CAYF,MAAMC,GAXW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACP,CACP,CAAK,GACqB,KACtB,OAAIE,EAAK,KAAK,QAAU,GACtBE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,UAClB,CAAO,EACM,IAEFF,EAAK,IACb,OAAQG,EAAO,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uEACT,SAAU,UAChB,CAAK,EACD,QAAQ,MAAMC,CAAK,CACpB,CACH,CC5BA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CX,EAAY,SAAS,cAAc,WAAW,EAC9CY,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAiB,SAAS,cAAc,cAAc,EAEtDC,EAAc,SAAS,eAAe,YAAY,EAIxD,IAAIT,EAAO,EACPC,EAAW,GACXF,EAAQ,GAGZO,EAAQ,iBAAiB,SAAU,MAAOI,GAAU,CAQhD,GAPAA,EAAM,eAAc,EACpBf,EAAU,UAAY,GACtBY,EAAQ,UAAU,OAAO,iBAAiB,EAC1CC,EAAe,UAAU,IAAI,iBAAiB,EAC9CR,EAAO,EACPD,EAAQU,EAAY,MAAM,OAEtBV,IAAU,GACV,GAAI,CACA,MAAML,EAAS,MAAMI,EAAYC,EAAOC,EAAMC,CAAQ,EACtDR,EAAYC,EAAQC,CAAS,EAGzBD,EAAO,QAAUO,EACjBO,EAAe,UAAU,OAAO,iBAAiB,EAEjDA,EAAe,UAAU,IAAI,iBAAiB,EAElDD,EAAQ,UAAU,IAAI,iBAAiB,CAC1C,OAAQF,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBG,EAAe,UAAU,IAAI,iBAAiB,EAC9CD,EAAQ,UAAU,IAAI,iBAAiB,CAC1C,MAEDA,EAAQ,UAAU,IAAI,iBAAiB,EACvCH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,UACtB,CAAS,CAET,CAAC,EAGDI,EAAe,iBAAiB,QAAS,SAAY,CACjD,GAAI,CACAA,EAAe,UAAU,IAAI,iBAAiB,EAC9CD,EAAQ,UAAU,OAAO,iBAAiB,EAC1CP,GAAQ,EACR,MAAMN,EAAS,MAAMI,EAAYC,EAAOC,EAAMC,CAAQ,EACtDR,EAAYC,EAAQC,CAAS,EAGzBD,EAAO,QAAUO,EACjBO,EAAe,UAAU,OAAO,iBAAiB,EAEjDA,EAAe,UAAU,IAAI,iBAAiB,EAElDD,EAAQ,UAAU,IAAI,iBAAiB,CAC1C,OAAQF,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBG,EAAe,UAAU,IAAI,iBAAiB,EAC9CD,EAAQ,UAAU,IAAI,iBAAiB,CAC1C,CACL,CAAC"}